_schema-version: 2.0.0
ID: web
version: 1.0.0

modules:
  - name: deployer
    type: com.sap.html5.application-content
    path: deployer
    provides:
      - name: deployer
        public: true
    build-parameters:
      ignore: [".git/, ".gitignore", "mta.jar", "mta.yaml"]
      requires: 
        - name: customize
          artifacts: 
            - './*' 
          target-path: resources/customize
    parameters:
      memory: 256M
      disk-quota: 128M
    requires:
      - name: jaggery-deployer

  - name: customize
    type: html5
    path: apps/customize
    build-parameters:
      ignore: [".git/", ".gitignore", "mta.jar", "mta.yaml"]
      builder: grunt
    parameters:
      disk-quota: 256M
      memory: 128M
    requires:
      - name: jaggery-uaa
      - name: jaggery-destination
      - name: jaggery-connectivity

resources:

  - name: jaggery-deployer
    type: org.cloudfoundry.existing-service

  - name: jaggery-connectivity
    type: org.cloudfoundry.existing-service

  - name: jaggery-destination
    type: org.cloudfoundry.existing-service

  - name: jaggery-uaa
    type: org.cloudfoundry.existing-service